<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>å¾®ä¿¡å…¼å®¹ç‰ˆ - æŠ–éŸ³çƒ­é—¨å¼¹çª—</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          sans-serif;
      }

      body {
        min-height: 100vh;
        background: linear-gradient(135deg, #fdf2f8 0%, #f3e8ff 100%);
        overflow-x: hidden;
        position: relative;
      }

      header {
        max-width: 1200px;
        margin: 0 auto;
        padding: 40px 15px;
        text-align: center;
      }

      h1 {
        font-size: clamp(1.8rem, 8vw, 2.5rem);
        font-weight: 700;
        background: linear-gradient(90deg, #ff2d55, #ff0080);
        -webkit-background-clip: text;
        background-clip: text;
        color: transparent;
        margin-bottom: 15px;
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }

      header p {
        color: #666;
        max-width: 350px;
        margin: 0 auto 30px;
        line-height: 1.6;
        font-size: 16px;
      }

      main {
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px 15px;
      }

      .btn-container {
        display: flex;
        justify-content: center;
      }

      #startBtn {
        background: #ff2d55;
        color: white;
        border: none;
        font-size: 18px;
        font-weight: 600;
        padding: 15px 35px;
        border-radius: 50px;
        box-shadow: 0 6px 20px rgba(255, 45, 85, 0.4);
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        gap: 10px;
        touch-action: manipulation;
      }

      #startBtn:hover {
        background: #e0254a;
        box-shadow: 0 8px 25px rgba(255, 45, 85, 0.5);
        transform: translateY(-3px);
      }

      #popupContainer {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        pointer-events: none;
        z-index: 9999;
      }

      @keyframes popupBounce {
        0% {
          opacity: 0;
          transform: scale(0.5);
        }
        70% {
          transform: scale(1.1);
        }
        100% {
          opacity: 1;
          transform: scale(1);
        }
      }

      .popup {
        position: absolute;
        opacity: 0;
        pointer-events: auto;
        cursor: pointer;
        border-radius: 16px;
        padding: 15px;
        box-shadow: 0 8px 20px -5px rgba(255, 45, 85, 0.3);
        animation: popupBounce 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275)
          forwards;
        transition: all 0.3s ease;
        overflow: hidden;
      }

      .popup-content {
        display: flex;
        flex-direction: column;
        height: 100%;
        text-align: center;
      }

      .popup-icon {
        width: 36px;
        height: 36px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 12px;
      }

      .popup-text {
        color: #333;
        line-height: 1.5;
        margin-bottom: 12px;
        flex-grow: 1;
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        font-size: 14px;
      }

      .close-btn {
        background: #f1f1f1;
        color: #666;
        border: none;
        padding: 5px 14px;
        border-radius: 20px;
        font-size: 13px;
        cursor: pointer;
        transition: background 0.2s ease;
        touch-action: manipulation;
      }

      .close-btn:hover {
        background: #e5e5e5;
      }

      .icon-heart {
        color: #ff2d55;
        font-size: 18px;
      }

      .icon-gift {
        font-size: 20px;
      }

      .color-code {
        font-size: 10px;
        color: rgba(0, 0, 0, 0.15);
        margin-top: 5px;
      }
    </style>
  </head>
  <body>
    <header>
      <h1>ç‚¹å‡»å¼€å¯å¥½è¿å¼¹çª—âœ¨</h1>
      <p>å¾®ä¿¡ä¸“å±é€‚é…ç‰ˆï¼Œç‚¹å‡»æŒ‰é’®è§¦å‘å¼¹çª—ï¼Œæ— å¹¿å‘Šä¸æ‰°æ°‘ï½</p>
    </header>

    <main>
      <div class="btn-container">
        <button id="startBtn">
          <span class="icon-gift">ğŸ</span> ç‚¹å‡»è§¦å‘å¼¹çª—
        </button>
      </div>
    </main>

    <div id="popupContainer"></div>

    <script>
      // 60æ¡æ­£èƒ½é‡æ–‡æ¡ˆ
      const popupTexts = [
        "ä»Šå¤©ä¹Ÿè¦å…ƒæ°”æ»¡æ»¡å‘€ï¼",
        "ä½ çœŸçš„è¶…æ£’çš„ï¼",
        "å¥½è¿æ­£åœ¨å‘ä½ é è¿‘ï½",
        "è®°å¾—å¥½å¥½çˆ±è‡ªå·±â¤ï¸",
        "ç”Ÿæ´»éœ€è¦ä¸€ç‚¹ä»ªå¼æ„Ÿ",
        "åŠ æ²¹ï¼Œä½ å¯ä»¥çš„ï¼",
        "ä¿æŒçƒ­çˆ±ï¼Œå¥”èµ´å±±æµ·",
        "å¹³å®‰å–œä¹ï¼Œä¸‡äº‹é¡ºæ„",
        "åšè‡ªå·±çš„å…‰ï¼Œä¸éœ€è¦å€Ÿè°çš„äº®",
        "æ„¿æ‰€æœ‰ç¾å¥½éƒ½å¦‚æœŸè€Œè‡³",
        "å¼€å¿ƒæœ€é‡è¦å•¦ï¼",
        "æš´å¯Œæš´ç¾æš´é¡ºåˆ©âœ¨",
        "åˆ«emoï¼Œå‘å‰çœ‹ï¼",
        "æ¯ä¸€æ¬¡åŠªåŠ›éƒ½ä¸ä¼šç™½è´¹",
        "äº«å—å½“ä¸‹ï¼Œæ´»åœ¨å½“ä¸‹",
        "æ¸©æŸ”åŠä¸¤ï¼Œä»å®¹ä¸€ç”Ÿ",
        "æ—¥å­æ…¢æ…¢è¿‡ï¼Œå¥½äº‹ä¼šå‘ç”Ÿ",
        "ä½ å€¼å¾—ä¸–é—´æ‰€æœ‰ç¾å¥½",
        "å°ç¡®å¹¸è—åœ¨æ—¥å¸¸é‡ŒğŸŒ¿",
        "æ…¢æ…¢æ¥ï¼Œè°è¿˜æ²¡ä¸ªåŠªåŠ›çš„è¿‡ç¨‹",
        "é˜³å…‰æ­£å¥½ï¼Œæœªæ¥å¯æœŸ",
        "æ²»æ„ˆä¸€åˆ‡ä¸å¼€å¿ƒçš„ï¼Œæ˜¯ä½ è‡ªå·±",
        "æŠŠçƒ¦æ¼ä¸¢æ‰ï¼Œè…¾å‡ºåœ°æ–¹è£…å¿«ä¹",
        "ä»Šæ—¥ä»½å¿«ä¹å·²é€è¾¾ï¼Œè¯·æŸ¥æ”¶ğŸ“¦",
        "åŠªåŠ›çš„ä½ ï¼Œé—ªé—ªå‘å…‰",
        "å¹³å‡¡çš„æ—¥å­ä¹Ÿæœ‰æ¸©æŸ”çš„å…‰èŠ’",
        "åˆ«ç„¦è™‘ï¼Œç”Ÿæ´»æ˜¯æ…¢æ…¢å‘å…‰çš„",
        "å¯çˆ±çš„äººï¼Œè¿æ°”éƒ½ä¸ä¼šå¤ªå·®",
        "å¿ƒä¸­æœ‰å…‰ï¼Œè„šä¸‹æœ‰è·¯",
        "ä¸‰é¤å››å­£ï¼Œæ¸©æŸ”æœ‰è¶£",
        "åšä¸ªç§¯æå‘ä¸Šçš„å°å¤ªé˜³â˜€ï¸",
        "æ‰€æœ‰é—æ†¾ï¼Œéƒ½æ˜¯æƒŠå–œçš„é“ºå«",
        "è®¤çœŸç”Ÿæ´»ï¼Œå°±èƒ½æ‰¾åˆ°è—èµ·æ¥çš„ç³–æœ",
        "ä½ åªç®¡å–„è‰¯ï¼Œä¸Šå¤©è‡ªæœ‰è¡¡é‡",
        "ç”Ÿæ´»è™½å¹³å‡¡ï¼Œå´æœ‰ä¸æœŸè€Œé‡çš„æ¸©æš–",
        "ä¹˜é£ç ´æµªï¼Œä¸è´ŸéŸ¶å",
        "æ¯å¤©è¿›æ­¥ä¸€ç‚¹ç‚¹ï¼Œå°±æ˜¯æœ€å¥½çš„æˆé•¿",
        "ä¿æŒå¾®ç¬‘ï¼Œå¥½è¿ä¼šä¸è¯·è‡ªæ¥",
        "æ„¿ä½ è¢«ä¸–ç•Œæ¸©æŸ”ä»¥å¾…",
        "ç®€å•ç‚¹ï¼Œå¿«ä¹ç‚¹ï¼Œç³Šæ¶‚ç‚¹",
        "æ˜Ÿå…‰ä¸è´Ÿèµ¶è·¯äººï¼Œæ—¶å…‰ä¸è´Ÿæœ‰å¿ƒäºº",
        "ç”Ÿæ´»å˜›ï¼Œç¬‘ä¸€ç¬‘å°±å¥½äº†ğŸ˜†",
        "ç”¨çƒ­çˆ±ï¼Œå¯¹æŠ—ç”Ÿæ´»çš„å¹³æ·¡",
        "å¥åº·å¹³å®‰ï¼Œå°±æ˜¯æœ€å¤§çš„å¹¸ç¦",
        "æŠŠæ—¥å­è¿‡æˆè‡ªå·±å–œæ¬¢çš„æ ·å­",
        "åŠªåŠ›çš„æ„ä¹‰ï¼Œæ˜¯è®©è‡ªå·±æœ‰æ›´å¤šé€‰æ‹©",
        "åˆ«å°†å°±ï¼Œä½ å€¼å¾—æ›´å¥½çš„",
        "å¶å°”æ”¾æ…¢è„šæ­¥ï¼Œçœ‹çœ‹æ²¿é€”é£æ™¯",
        "å…ƒæ°”åŠ è½½ä¸­â€¦100%âœ…",
        "ç”Ÿæ´»æ€»æœ‰ä¸æœŸè€Œé‡çš„æƒŠå–œ",
        "å‹‡æ•¢ä¸€ç‚¹ï¼Œä½ æ¯”æƒ³è±¡ä¸­æ›´å¼ºå¤§",
        "ä¸‡äº‹çš†å¯æœŸå¾…ï¼Œæœªæ¥çš†æœ‰å¯èƒ½",
        "å¥½å¥½åƒé¥­ï¼Œå¥½å¥½ç¡è§‰ï¼Œå¥½å¥½çˆ±è‡ªå·±",
        "æŠŠä¸å¼€å¿ƒç•™åœ¨æ˜¨å¤©ï¼Œä»Šå¤©ä¾æ—§ç¾å¥½",
        "å¿ƒæ€å¯¹äº†ï¼Œä¸€åˆ‡éƒ½é¡ºäº†",
        "åšä¸ªæ¸©æš–çš„äººï¼Œæ¸©æš–è‡ªå·±ä¹Ÿæ¸©æš–åˆ«äºº",
        "å¥½è¿è—åœ¨åŠªåŠ›é‡Œï¼Œä¹Ÿè—åœ¨å–„è‰¯é‡Œ",
        "ç”Ÿæ´»æœ‰ç‚¹è‹¦ï¼Œä½†ä½ å¾ˆç”œğŸ¬",
        "æ¯æ®µæ—…ç¨‹ï¼Œéƒ½æœ‰å®ƒçš„æ„ä¹‰",
        "ä¸æ…Œä¸å¿™ï¼Œæ…¢æ…¢æˆé•¿",
        "æ„¿ä½ çœ¼é‡Œæœ‰å…‰ï¼Œå¿ƒä¸­æœ‰çˆ±",
        "æ‹’ç»å†…è€—ï¼Œå¥½å¥½ç”Ÿæ´»",
        "æ—¥å­æœ‰ç›¼å¤´ï¼Œç”Ÿæ´»æœ‰ç”œå¤´",
        "å‡¡æ˜¯è¿‡å¾€ï¼Œçš†ä¸ºåºç« ï¼›å‡¡æ˜¯æœªæ¥ï¼Œçš†æœ‰å¯æœŸ",
        "ä½ è‹¥ç››å¼€ï¼Œè´è¶è‡ªæ¥",
        "ä¿æŒçƒ­çˆ±ï¼Œé—ªé—ªå‘å…‰",
        "ä»Šæ—¥ä»½å°ç¾å¥½ï¼Œè¯·æŸ¥æ”¶ğŸŒŸ",
        "ç”Ÿæ´»æ˜æœ—ï¼Œä¸‡ç‰©å¯çˆ±",
        "åŠªåŠ›çš„äººï¼Œç»ˆä¼šè¢«ä¸–ç•Œæ¸©æŸ”ä»¥å¾…",
      ];

      // 40ä¸ªé¢œè‰²ç»„åˆ
      const allColors = [
        { bg: "#ffffff", border: "#ff2d55" },
        { bg: "#fff0f5", border: "#ff0080" },
        { bg: "#faf5ff", border: "#7928ca" },
        { bg: "#e6f7ff", border: "#1890ff" },
        { bg: "#fffbe6", border: "#faad14" },
        { bg: "#f0fff4", border: "#52c41a" },
        { bg: "#fff7e6", border: "#fa8c16" },
        { bg: "#fef7fb", border: "#ff4d94" },
        { bg: "#f5fafe", border: "#40a9ff" },
        { bg: "#f9f5ff", border: "#9254de" },
        { bg: "#f0f9ff", border: "#096dd9" },
        { bg: "#fcf1f7", border: "#ed4b9e" },
        { bg: "#eaf6fa", border: "#36cffb" },
        { bg: "#f5f5f5", border: "#8c8c8c" },
        { bg: "#faf0f5", border: "#d9480f" },
        { bg: "#e8f4f8", border: "#29b6f6" },
        { bg: "#faf6ed", border: "#faad14" },
        { bg: "#f1f8e9", border: "#66bb6a" },
        { bg: "#fef5e7", border: "#ff9f43" },
        { bg: "#fdf2f8", border: "#e53e3e" },
        { bg: "#f2f9ff", border: "#722ed1" },
        { bg: "#f5fafe", border: "#00b8d9" },
        { bg: "#fafafa", border: "#ff6b6b" },
        { bg: "#f9f7f7", border: "#ff8a80" },
        { bg: "#e6f0ff", border: "#536dfe" },
        { bg: "#f0f8fb", border: "#00c48c" },
        { bg: "#fcf6e5", border: "#ffc53d" },
        { bg: "#faf0f5", border: "#9f7aea" },
        { bg: "#e8f5e9", border: "#2e7d32" },
        { bg: "#fff3e0", border: "#ff7a45" },
        { bg: "#f0fff0", border: "#388e3c" },
        { bg: "#ffebee", border: "#c2185b" },
        { bg: "#e3f2fd", border: "#0288d1" },
        { bg: "#fff3e0", border: "#fb8c00" },
        { bg: "#f3e5f5", border: "#ab47bc" },
        { bg: "#e0f7fa", border: "#00acc1" },
        { bg: "#fff8e1", border: "#ff6d00" },
        { bg: "#ede7f6", border: "#7e57c2" },
        { bg: "#e8f5e9", border: "#1b5e20" },
        { bg: "#ffecb3", border: "#ff6f00" },
      ];

      // å¼¹çª—é…ç½®ï¼ˆå¾®ä¿¡é€‚é…ï¼šå‡å°‘æ•°é‡ï¼Œæ”¾æ…¢é€Ÿåº¦ï¼‰
      const popupConfig = {
        count: 20, // å¾®ä¿¡ç«¯é€‚ä¸­æ•°é‡ï¼Œä¸æ‹¥æŒ¤
        delay: 300,
        minSize: 120,
        maxSize: 150,
      };

      let colorPool = [];
      let cycleCount = 0;

      // åˆå§‹åŒ–é¢œè‰²æ± 
      function initColorPool() {
        cycleCount++;
        colorPool = JSON.parse(JSON.stringify(allColors)).sort(
          () => 0.5 - Math.random()
        );
      }

      // è·å–æ— é‡å¤é¢œè‰²
      function getUniqueColor() {
        if (colorPool.length === 0) initColorPool();
        return colorPool.shift();
      }

      // åˆ›å»ºå¼¹çª—
      function createPopup(text, index) {
        const popup = document.createElement("div");
        popup.className = "popup";

        const size =
          Math.floor(
            Math.random() * (popupConfig.maxSize - popupConfig.minSize)
          ) + popupConfig.minSize;
        const colorConfig = getUniqueColor();

        const viewportWidth = document.documentElement.clientWidth;
        const viewportHeight = document.documentElement.clientHeight;
        const maxX = viewportWidth - size - 15;
        const maxY = viewportHeight - size - 40;
        const x = Math.max(15, Math.floor(Math.random() * maxX));
        const y = Math.max(40, Math.floor(Math.random() * maxY));

        popup.style.width = `${size}px`;
        popup.style.left = `${x}px`;
        popup.style.top = `${y}px`;
        popup.style.zIndex = 9999 + index;
        popup.style.backgroundColor = colorConfig.bg;
        popup.style.border = `1px solid ${colorConfig.border}`;

        popup.innerHTML = `
        <div class="popup-content">
          <div class="popup-icon" style="background-color: ${hexToRgba(
            colorConfig.border,
            0.1
          )}">
            <span class="icon-heart">â™¥</span>
          </div>
          <p class="popup-text">${text}</p>
          <button class="close-btn">å…³é—­</button>
          <div class="color-code">${colorConfig.bg} | å¾ªç¯${cycleCount}æ¬¡</div>
        </div>
      `;

        const container = document.getElementById("popupContainer");
        container.appendChild(popup);

        // å¾®ä¿¡é€‚é…ï¼šä¼˜å…ˆtouchäº‹ä»¶ï¼Œå…¼å®¹click
        function closePopup() {
          popup.style.opacity = "0";
          popup.style.transform = "scale(0.8)";
          setTimeout(() => {
            if (popup.parentNode) popup.parentNode.removeChild(popup);
          }, 300);
        }

        popup.addEventListener(
          "touchstart",
          (e) => {
            e.preventDefault();
            closePopup();
          },
          { passive: false }
        ); // å¾®ä¿¡ç«¯éœ€æ˜¾å¼å…³é—­passive

        popup.addEventListener("click", closePopup);

        popup.querySelector(".close-btn").addEventListener(
          "touchstart",
          (e) => {
            e.preventDefault();
            e.stopPropagation();
            closePopup();
          },
          { passive: false }
        );

        popup.querySelector(".close-btn").addEventListener("click", (e) => {
          e.stopPropagation();
          closePopup();
        });

        setTimeout(closePopup, 6000 + Math.random() * 4000);
      }

      // åå…­è¿›åˆ¶è½¬RGBA
      function hexToRgba(hex, alpha) {
        const r = parseInt(hex.slice(1, 3), 16);
        const g = parseInt(hex.slice(3, 5), 16);
        const b = parseInt(hex.slice(5, 7), 16);
        return `rgba(${r}, ${g}, ${b}, ${alpha})`;
      }

      // æ‰¹é‡åˆ›å»ºå¼¹çª—ï¼ˆä»…ç”¨æˆ·ç‚¹å‡»åè§¦å‘ï¼‰
      function createPopups() {
        document.getElementById("popupContainer").innerHTML = "";
        cycleCount = 0;
        initColorPool();

        // æ–‡å­—å¾ªç¯å¤ç”¨
        const repeatedTexts = [];
        const textCycle = Math.ceil(popupConfig.count / popupTexts.length);
        for (let i = 0; i < textCycle; i++) {
          repeatedTexts.push(
            ...[...popupTexts].sort(() => 0.5 - Math.random())
          );
        }
        const selectedTexts = repeatedTexts.slice(0, popupConfig.count);

        // é€ä¸ªåˆ›å»º
        selectedTexts.forEach((text, index) => {
          setTimeout(() => {
            createPopup(text, index);
          }, index * popupConfig.delay);
        });
      }

      // å¾®ä¿¡é€‚é…ï¼šä»…ç”¨æˆ·ç‚¹å‡»æŒ‰é’®åè§¦å‘å¼¹çª—ï¼ˆå…³é”®ï¼é¿å…è¢«æ‹¦æˆªï¼‰
      document.getElementById("startBtn").addEventListener(
        "touchstart",
        (e) => {
          e.preventDefault();
          createPopups();
        },
        { passive: false }
      );

      document
        .getElementById("startBtn")
        .addEventListener("click", createPopups);

      // çª—å£é€‚é…
      window.addEventListener("resize", () => {
        const popups = document.querySelectorAll(".popup");
        popups.forEach((popup) => {
          const size = popup.offsetWidth;
          const viewportWidth = document.documentElement.clientWidth;
          const viewportHeight = document.documentElement.clientHeight;
          const maxX = viewportWidth - size - 15;
          const maxY = viewportHeight - size - 40;
          popup.style.left = `${Math.max(
            15,
            Math.min(parseInt(popup.style.left), maxX)
          )}px`;
          popup.style.top = `${Math.max(
            40,
            Math.min(parseInt(popup.style.top), maxY)
          )}px`;
        });
      });
    </script>
  </body>
</html>
